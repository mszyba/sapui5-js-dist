/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Lib","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/fl/changeHandler/AddIFrame","sap/ui/fl/changeHandler/common/getTargetAggregationIndex","sap/ui/fl/changeHandler/common/createIFrame"],function(e,t,n,r,a){"use strict";var o=Object.assign({},n);o.applyChange=function(t,o,i){var g=i.modifier;var c=t.getContent();var s=c.targetAggregation;if(s!=="sections"){return Promise.resolve().then(n.applyChange.bind(n,t,o,i))}var u=i.view;var l=i.appComponent;var f=c.selector;var d=e.getResourceBundleFor("sap.uxap").getText("SECTION_TITLE_FOR_IFRAME");var p;var v;return Promise.resolve().then(g.createControl.bind(g,"sap.uxap.ObjectPageSection",l,u,f,{title:d},false)).then(function(e){p=e;var t=Object.create(f);t.id+="-subSection";return g.createControl("sap.uxap.ObjectPageSubSection",l,u,t,{title:d},false)}).then(function(e){v=e;return g.insertAggregation(p,"subSections",v,0,u)}).then(function(){var e=Object.create(f);e.id+="-iframe";var n={sourceControlId:g.getId(v),selectorControlId:g.getId(p),propertyName:"title"};return a(t,i,e,n)}).then(function(e){return g.insertAggregation(v,"blocks",e,0,u)}).then(r.bind(null,t,o,i)).then(function(e){return g.insertAggregation(o,"sections",p,e,u)}).then(function(){t.setRevertData([g.getId(p)])})};o.getCondenserInfo=function(e){var t=Object.assign({},n.getCondenserInfo(e));var r=e.getContent();var a=r.targetAggregation;if(a==="sections"){t.updateControl=Object.assign({},t.affectedControl);t.updateControl.id=t.affectedControl.id+"-iframe"}return t};o.getChangeVisualizationInfo=function(e,n){var r=e.getContent().selector;var a=t.bySelector(r,n);var o=a.getParent().getAggregation("_anchorBar");var i=[r];var g=[r];o.getAggregation("items").forEach(function(e){if(a.getId()===e.getKey()){g.push(e.getId())}});return{affectedControls:i,displayControls:g}};return o},true);
//# sourceMappingURL=AddIFrameObjectPageLayout.js.map